<!--menu.html-->

<script>
  var loadPageHistory = []
  const MAX_HISTORY_LEN=10

  var loadPage = function (page) {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        // Typical action to be performed when the document is ready:
        document.getElementById("main").innerHTML = xhttp.responseText;
        if (page.split('?')[0] === 'keyfeatures.html') {
          reloadDatePicker();
        }
        if (loadPageHistory[loadPageHistory.length-1] != page)
          loadPageHistory.push(page);
        if (loadPageHistory.length > MAX_HISTORY_LEN) {
          loadPageHistory.shift()
        }
      }
    };
    xhttp.open("GET", page, true);
    xhttp.send();
  }

  var reloadDatePicker = function () {
    $('#dp1').fdatepicker({
      format: 'yyyy-mm-dd',
      disableDblClickSelection: true
    });

  }

  var loadPreviousPage = function() {
    if (loadPageHistory.length > 1) {
      loadPageHistory.pop() // pop the current page
      var prevPage = loadPageHistory.pop()
      loadPage(prevPage);
    }
  }

</script>

<nav class="top-bar">
  <div class="top-bar-left">
    <ul class="dropdown menu" data-dropdown-menu>
      <li class="has-submenu">
        <a href="#0" onclick="loadPage('clients.html')">Clients</a>
      </li>
      <li><a onclick="loadPage('keys.html')" href="#0">Keys</a>
      </li>
      <li><a onclick="loadPage('features.html')" href="#0">Features</a>
        <ul class="submenu menu vertical" data-submenu>
          <li><a onclick="loadPage('templates.html')" href="#0">Templates</a></li>
          <li><a onclick="loadPage('packagescontent.html')" href="#0">Packages</a></li>
        </ul>
      </li>
    </ul>
  </div>
  <div class="top-bar-right">
    <ul class="menu">
      <!-- <li><input type="search" placeholder="Search"></li>
      <li><button type="button" class="button">Search</button></li> -->
      <li><button type="button" class="button" onclick="loadPreviousPage()">Back</button></li>
    </ul>
  </div>
</nav>